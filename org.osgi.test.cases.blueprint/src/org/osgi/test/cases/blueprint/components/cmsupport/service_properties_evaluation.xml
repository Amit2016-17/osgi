<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
    xmlns:bpcm="http://www.osgi.org/xmlns/blueprint-cm/v1.0.0">

    <description> Publishing configuration admin properties with exported services </description>

    <!-- publish one -->
    <bpcm:property-placeholder persistent-id="org.osgi.test.cases.blueprint.components.cmsupport.config1" />

    <bean id="compGoodService" class="org.osgi.test.cases.blueprint.services.TestGoodService">
        <argument value="compGoodService"/>
    </bean>

    <service id="srvGoodService" ref="compGoodService" interface="org.osgi.test.cases.blueprint.services.TestGoodService">
        <service-properties>
            <entry key="str" value="${str}"/>
        </service-properties>
    </service>

    <!-- publish all the properties -->
    <bean id="compGoodServiceSubclass" class="org.osgi.test.cases.blueprint.services.TestGoodServiceSubclass">
        <argument value="compGoodServiceSubclass"/>
    </bean>

    <service id="srvGoodServiceSubclass" ref="compGoodServiceSubclass" interface="org.osgi.test.cases.blueprint.services.TestGoodServiceSubclass">
        <service-properties>
            <bpcm:cm-properties persistent-id="org.osgi.test.cases.blueprint.components.cmsupport.config1"/>
        </service-properties>
    </service>

    <service id="srvGoodServiceSubclassExplicit" ref="compGoodServiceSubclass" interface="org.osgi.test.cases.blueprint.services.TestGoodServiceSubclass">
        <service-properties>
            <entry key="extra" value="abc"/>
            <bpcm:cm-properties persistent-id="org.osgi.test.cases.blueprint.components.cmsupport.config1"/>
        </service-properties>
    </service>


</blueprint>
