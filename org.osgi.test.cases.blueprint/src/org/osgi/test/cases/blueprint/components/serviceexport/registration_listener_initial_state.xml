<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">

    <description>
        Tests the initial state call for a registration listener.  Since the exported service
        has an unsatisified service dependency, it will not be registered.  When the service
        manager activates, it must call the unregistered method for the service.
    </description>

    <!-- the node this service export maps into. -->
   <bean id="ServiceOne" class="org.osgi.test.cases.blueprint.services.TestGoodServiceSubclass">
       <argument value="ServiceOne"/>
   </bean>

   <reference id="ServiceOneDependency" interface="org.osgi.test.cases.blueprint.services.TestServiceTwo"/>

   <!-- simple export using a reference and just one interface.  This one will not register because of the unstatisfied dependency-->
   <service id="ServiceOneInactive" ref="ServiceOne" interface="org.osgi.test.cases.blueprint.services.TestServiceOne" depends-on="ServiceOneDependency">
       <service-properties>
           <entry key="service.component.name" value="ServiceOneInactive" />
       </service-properties>
       <registration-listener registration-method="registered" unregistration-method="unregistered">
           <bean class="org.osgi.test.cases.blueprint.components.serviceexport.ServiceOneRegistrationListener">
               <argument value="unregisteredListener"/>
           </bean>
       </registration-listener>
   </service>

   <!-- simple export using a reference and just one interface.  This one will register because all dependencies are satisfied -->
   <service id="ServiceOneActive" ref="ServiceOne" interface="org.osgi.test.cases.blueprint.services.TestServiceOne">
       <service-properties>
           <entry key="service.component.name" value="ServiceOneActive" />
       </service-properties>
       <registration-listener registration-method="registered" unregistration-method="unregistered">
           <bean class="org.osgi.test.cases.blueprint.components.serviceexport.ServiceOneRegistrationListener">
               <argument value="registeredListener"/>
           </bean>
       </registration-listener>
   </service>
</blueprint>

