<?xml version="1.0" encoding="UTF-8"?>
<project name="project" default="run-core">
	
	<target name="run-core">
		<ant target="-run">
		  <property name="impls" value="file:../osgi.core.impls.jar"/>
		</ant>
	</target>
	
	<target name="run-cmpn">
		<ant target="-run">
		  <property name="impls" value="file:../osgi.cmpn.impls.jar"/>
		</ant>
	</target>
	
	<target name="-run">
		<echo>Testing ${impls}</echo>
		<java jar="../org.osgi.impl.framework.eclipse.jar" fork="true" >	
			<jvmarg line="-Djava.security.manager=org.eclipse.osgi.framework.internal.core.FrameworkSecurityManager"/>
			<jvmarg line="-Djava.security.policy=policy"/>
			<jvmarg line="-Xverify:none"/>
			<arg line="-console:2012"/>
			<arg line="init"/>
			<arg line="'install file:../osgi.jar start'"/>
			<arg line="'install file:../osgi.target.jar start'"/>
			<arg line="'install ${impls} start'"/>
			<arg line="launch"/>
		</java>
	</target>
</project>
